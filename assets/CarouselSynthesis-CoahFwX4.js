import{r as m,R as O,j as e}from"./index-DHpABVS0.js";const I=({data:a,isBusy:f,statusText:j,canShare:N,actions:u})=>{const[c,g]=m.useState({summary1:!1,summary2:!1}),[o,v]=m.useState(0),[d,w]=m.useState({}),b=m.useRef({}),n=O.useMemo(()=>{if(!a.synthesis)return[];const s=a.synthesis.split(`
`),r=[];let t=null;for(const l of s){const i=l.trim(),y=i.includes("TOPIC FOLLOWS");if(y)t&&r.push(t),t={title:i.replace(/^TOPIC FOLLOWS\s*##\s*/i,"").replace(/^##\s*TOPIC FOLLOWS:\s*/i,"").replace(/^TOPIC FOLLOWS:\s*/i,"").trim(),bullets:[]};else if(t&&(i.startsWith("•")||i.startsWith("*")||i.startsWith("-"))){const h=i.replace(/^[•*-]\s*/,"");h&&t.bullets.push(h)}else i.startsWith("## ")&&!y&&(t&&r.push(t),t=null)}return t&&r.push(t),r},[a.synthesis]),x=s=>{var r;v(s),(r=b.current[s])==null||r.scrollIntoView({behavior:"smooth",block:"center"})},S=()=>{const s=(o+1)%n.length;x(s)},C=()=>{const s=(o-1+n.length)%n.length;x(s)},T=s=>{w(r=>({...r,[s]:!r[s]}))},k=(s,r)=>{const t=s.match(/^(According to the Article:)/i),l=s.match(/^(According to Hacker News User [^:]+:)/i);return t?e.jsxs("li",{className:"mb-3",children:[e.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-xs font-bold mr-2",children:t[1]}),e.jsx("span",{children:s.substring(t[1].length).trim()})]},r):l?e.jsxs("li",{className:"mb-3",children:[e.jsx("span",{className:"bg-orange-500 text-white px-2 py-1 rounded text-xs font-bold mr-2",children:l[1]}),e.jsx("span",{children:s.substring(l[1].length).trim()})]},r):e.jsx("li",{className:"mb-3",children:s},r)},p=s=>s.split(`
`).map((r,t)=>{const l=r.trim();return l.startsWith("•")||l.startsWith("-")?e.jsx("li",{className:"list-disc ml-5 mb-2",children:l.replace(/^[•-]\s*/,"")},t):l?e.jsx("p",{className:"mb-2",children:l},t):null});return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 pb-20",children:[f&&e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-blue-600 text-white p-3 text-center z-50",children:j}),e.jsxs("div",{className:"max-w-7xl mx-auto p-4 mt-4",children:[n.length>0&&e.jsx("div",{className:"mb-6 flex flex-wrap gap-2 justify-center",children:n.map((s,r)=>e.jsx("button",{onClick:()=>x(r),className:`px-4 py-2 rounded text-sm font-medium transition-colors ${o===r?"bg-teal-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:s.title},r))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[a.summary1&&e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-750 border-b border-gray-700",children:[e.jsx("h3",{className:"font-bold text-sm",children:"Article Summary"}),e.jsx("button",{onClick:()=>g(s=>({...s,summary1:!s.summary1})),className:"text-xs text-teal-400 hover:text-teal-300",children:c.summary1?"Collapse":"Expand"})]}),e.jsx("div",{className:"p-3 overflow-y-auto text-sm text-gray-300",style:{maxHeight:c.summary1?"384px":"192px"},children:p(a.summary1)}),a.url1&&e.jsx("div",{className:"p-2 border-t border-gray-700 text-xs",children:e.jsx("a",{href:a.url1,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"Source"})})]}),a.summary2&&e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-750 border-b border-gray-700",children:[e.jsx("h3",{className:"font-bold text-sm",children:"Discussion Summary"}),e.jsx("button",{onClick:()=>g(s=>({...s,summary2:!s.summary2})),className:"text-xs text-teal-400 hover:text-teal-300",children:c.summary2?"Collapse":"Expand"})]}),e.jsx("div",{className:"p-3 overflow-y-auto text-sm text-gray-300",style:{maxHeight:c.summary2?"384px":"192px"},children:p(a.summary2)}),a.url2&&e.jsx("div",{className:"p-2 border-t border-gray-700 text-xs",children:e.jsx("a",{href:a.url2,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"Source"})})]})]}),e.jsx("div",{className:"lg:col-span-3",children:n.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:C,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm font-medium",children:"← Prev"}),e.jsx("h2",{className:"text-xl font-bold text-center",children:"Interactive Synthesis"}),e.jsx("button",{onClick:S,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm font-medium",children:"Next →"})]}),e.jsx("div",{className:"space-y-4",children:n.map((s,r)=>e.jsxs("div",{ref:t=>b.current[r]=t,className:`bg-gray-800 border-2 rounded-lg overflow-hidden transition-all ${o===r?"border-teal-500":"border-gray-700"}`,children:[e.jsxs("div",{onClick:()=>T(r),className:"p-4 cursor-pointer hover:bg-gray-750 flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:s.title}),!d[r]&&s.bullets[0]&&e.jsxs("p",{className:"text-sm text-gray-400 line-clamp-2",children:[s.bullets[0].substring(0,100),"..."]})]}),e.jsx("span",{className:"text-2xl text-gray-500 ml-4",children:d[r]?"▼":"▶"})]}),d[r]&&e.jsx("div",{className:"p-4 pt-0 border-t border-gray-700",children:e.jsx("ul",{className:"list-disc ml-5 space-y-2 text-gray-300",children:s.bullets.map((t,l)=>k(t,l))})})]},r))})]}):e.jsx("div",{className:"text-center text-gray-500 py-12",children:"No synthesis available"})})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex justify-center gap-4",children:[e.jsx("button",{onClick:u.onDownloadFull,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 rounded font-medium",children:"Download"}),N&&e.jsx("button",{onClick:()=>u.onShare("Synthesis Carousel",a.synthesis||""),className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 rounded font-medium",children:"Share"})]})})]})};export{I as default};
