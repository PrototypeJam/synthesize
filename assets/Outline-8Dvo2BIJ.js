import{r as o,j as e}from"./index-CQS_ZpxP.js";const w=({data:r,isBusy:p,statusText:g,canShare:b,actions:x})=>{const[y,j]=o.useState(new Set),N=s=>{j(l=>{const t=new Set(l);return t.has(s)?t.delete(s):t.add(s),t})},m=o.useMemo(()=>{const s=(r.synthesis||"").split(`
`),l=[];let t=null,n=0,i=0;for(const f of s){const a=f.trim();if(!a)continue;if(a.includes("TOPIC FOLLOWS")||a.startsWith("##")&&!/^##\s*PROVENANCE\b/i.test(a)){i++;let c=a.replace(/^TOPIC FOLLOWS\s*##\s*/i,"").replace(/^##\s*TOPIC FOLLOWS:\s*/i,"").replace(/^TOPIC FOLLOWS:\s*/i,"").replace(/^##\s*/,"").trim();t={level:1,number:["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX"][i-1]||String(i),title:c||`Topic ${i}`,content:[],id:`section-${i}`},l.push(t),n=0}else if(t&&(a.startsWith("â€¢")||a.startsWith("*")||a.startsWith("-"))){n++;const c=a.replace(/^[â€¢*-]\s*/,"");if(c){const u=String.fromCharCode(64+n);t.content.push(`${u}. ${c}`)}}}return l},[r.synthesis]),d=o.useMemo(()=>{const s=[];return r.summary1&&s.push({id:"summary1",title:"Article Summary",content:r.summary1}),r.summary2&&s.push({id:"summary2",title:"Discussion Summary",content:r.summary2}),s},[r.summary1,r.summary2]),h=s=>{const l=`${window.location.origin}${window.location.pathname}#${s}`;navigator.clipboard.writeText(l)};return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[e.jsx("header",{className:"bg-gray-800 border-b border-gray-700 sticky top-0 z-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:r.hnTitle||"Synthesis Outline"}),p&&e.jsx("p",{className:"text-sm text-blue-400 mt-1",children:g})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:x.onDownloadFull,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Download"}),b&&e.jsx("button",{onClick:()=>x.onShare("Outline",r.synthesis||""),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-sm",children:"Share"})]})]})})}),e.jsxs("div",{className:"flex max-w-7xl mx-auto",children:[e.jsx("aside",{className:"hidden lg:block w-64 border-r border-gray-700 bg-gray-800/50 sticky top-16 h-[calc(100vh-4rem)] overflow-y-auto",children:e.jsxs("nav",{className:"p-4",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wide mb-3",children:"Contents"}),e.jsxs("ul",{className:"space-y-0.5 text-sm",children:[d.map(s=>e.jsx("li",{children:e.jsx("a",{href:`#${s.id}`,className:"block py-1.5 px-2 rounded hover:bg-gray-700 text-gray-300 hover:text-white transition",onClick:l=>{var t;l.preventDefault(),(t=document.getElementById(s.id))==null||t.scrollIntoView({behavior:"smooth"})},children:s.title})},s.id)),m.map((s,l)=>e.jsx("li",{children:e.jsxs("a",{href:`#${s.id}`,className:"block py-1.5 px-2 rounded hover:bg-gray-700 text-gray-300 hover:text-white transition",onClick:t=>{var n;t.preventDefault(),(n=document.getElementById(s.id))==null||n.scrollIntoView({behavior:"smooth"})},children:[e.jsxs("span",{className:"text-blue-400",children:[s.number,"."]})," ",s.title]})},l))]})]})}),e.jsxs("main",{className:"flex-1 px-6 py-8",children:[d.map((s,l)=>e.jsxs("section",{id:s.id,className:"mb-8 scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-400",children:s.title}),e.jsx("button",{onClick:()=>h(s.id),className:"text-xs text-gray-500 hover:text-gray-300 px-2 py-1 rounded hover:bg-gray-800",title:"Copy link to section",children:"ðŸ”— Copy Link"})]}),e.jsx("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-5",children:e.jsx("div",{className:"space-y-1.5 text-gray-300",children:s.content.split(`
`).map((t,n)=>{const i=t.trim();return i.startsWith("â€¢")||i.startsWith("- ")?e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("span",{className:"text-blue-400",children:"â€¢"}),e.jsx("span",{children:i.replace(/^[â€¢-]\s*/,"")})]},n):i?e.jsx("p",{children:i},n):null})})})]},s.id)),e.jsx("div",{className:"space-y-6",children:m.map((s,l)=>{const t=y.has(s.id);return e.jsxs("section",{id:s.id,className:"scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("button",{onClick:()=>N(s.id),className:"flex items-center gap-3 group flex-1",children:[e.jsx("span",{className:"text-lg text-gray-500 group-hover:text-gray-300 transition",children:t?"â–¸":"â–¾"}),e.jsxs("h2",{className:"text-2xl font-bold text-white group-hover:text-blue-300 transition text-left",children:[e.jsxs("span",{className:"text-blue-400",children:[s.number,"."]})," ",s.title]})]}),e.jsx("button",{onClick:()=>h(s.id),className:"text-xs text-gray-500 hover:text-gray-300 px-2 py-1 rounded hover:bg-gray-800",title:"Copy link to section",children:"ðŸ”—"})]}),!t&&e.jsx("div",{className:"ml-12 space-y-2.5",children:s.content.map((n,i)=>e.jsxs("div",{className:"flex gap-3 text-gray-300 leading-relaxed",children:[e.jsxs("span",{className:"text-teal-400 font-mono text-sm",children:[n.split(".")[0],"."]}),e.jsx("span",{children:n.substring(n.indexOf(".")+1).trim()})]},i))})]},l)})}),r.url1||r.url2?e.jsxs("footer",{className:"mt-12 pt-6 border-t border-gray-700",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Sources"}),e.jsxs("ul",{className:"text-sm text-gray-400 space-y-1.5",children:[r.url1&&e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-blue-400",children:"â€¢"}),e.jsx("a",{href:r.url1,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-400 hover:underline break-all",children:r.url1})]}),r.url2&&e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-orange-400",children:"â€¢"}),e.jsx("a",{href:r.url2,target:"_blank",rel:"noopener noreferrer",className:"hover:text-orange-400 hover:underline break-all",children:r.url2})]})]})]}):null]})]})]})};export{w as default};
