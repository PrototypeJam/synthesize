import{r as m,j as e}from"./index-CQS_ZpxP.js";const N=({data:l,isBusy:p,statusText:b,canShare:y,actions:x})=>{const[i,g]=m.useState(new Set),d=r=>{g(t=>{const s=new Set(t);return s.has(r)?s.delete(r):s.add(r),s})},o=m.useMemo(()=>(l.synthesis||"").split(`
`).filter(t=>t.trim().startsWith("•")||t.trim().startsWith("- ")).slice(0,3).map(t=>t.replace(/^[•-]\s*/,"")),[l.synthesis]),c=m.useMemo(()=>{const r=(l.synthesis||"").split(`
`),t=[];let s=null;return r.forEach(n=>{const a=n.trim();if(a)if(a.startsWith("## TOPIC FOLLOWS:")||a.startsWith("##")&&!/^##\s*PROVENANCE\b/i.test(a)){const u=a.replace("## TOPIC FOLLOWS:","").replace(/^##\s*/,"").trim();s={title:u||"Topic",bullets:[],id:u.toLowerCase().replace(/\s+/g,"-")},t.push(s)}else(a.startsWith("•")||a.startsWith("- "))&&s&&s.bullets.push(a.replace(/^[•-]\s*/,""))}),t},[l.synthesis]),h=r=>{const t=r.split(/\s+/).length;return`${Math.ceil(t/200)} min read`};return e.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:l.hnTitle||"Content Digest"}),p&&e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:b})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:x.onDownloadFull,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded text-sm font-medium",children:"Download"}),y&&e.jsx("button",{onClick:()=>x.onShare("Digest",l.synthesis||""),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm font-medium",children:"Share"})]})]})})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-8",children:[o.length>0&&e.jsxs("section",{className:"bg-blue-50 border-l-4 border-blue-600 p-6 mb-8 rounded-r",children:[e.jsx("h2",{className:"text-lg font-bold text-blue-900 mb-3",children:"Executive Summary"}),e.jsx("ul",{className:"space-y-2",children:o.map((r,t)=>e.jsxs("li",{className:"flex items-start gap-2 text-gray-800",children:[e.jsx("span",{className:"text-blue-600 font-bold",children:"•"}),e.jsx("span",{children:r})]},t))})]}),c.length>0&&e.jsxs("nav",{className:"bg-white border border-gray-200 rounded p-5 mb-8",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide mb-3",children:"Contents"}),e.jsx("ul",{className:"space-y-1.5",children:c.map((r,t)=>e.jsxs("li",{children:[e.jsxs("a",{href:`#${r.id}`,className:"text-blue-600 hover:text-blue-800 text-sm hover:underline",onClick:s=>{var n;s.preventDefault(),(n=document.getElementById(r.id))==null||n.scrollIntoView({behavior:"smooth"})},children:[t+1,". ",r.title]}),e.jsxs("span",{className:"text-gray-400 text-xs ml-2",children:["(",r.bullets.length," point",r.bullets.length!==1?"s":"",")"]})]},t))})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[l.summary1&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded overflow-hidden",children:[e.jsx("button",{onClick:()=>d("summary1"),className:"w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:i.has("summary1")?"▼":"▶"}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Article Summary"}),e.jsx("p",{className:"text-sm text-gray-500",children:h(l.summary1)})]})]})}),i.has("summary1")&&e.jsx("div",{className:"px-5 py-4 border-t border-gray-200 bg-gray-50",children:e.jsx("div",{className:"prose prose-sm max-w-none text-gray-800",children:l.summary1.split(`
`).map((r,t)=>{const s=r.trim();return s.startsWith("•")||s.startsWith("- ")?e.jsx("li",{className:"ml-5 mb-1",children:s.replace(/^[•-]\s*/,"")},t):s?e.jsx("p",{className:"mb-2",children:s},t):null})})})]}),l.summary2&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded overflow-hidden",children:[e.jsx("button",{onClick:()=>d("summary2"),className:"w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:i.has("summary2")?"▼":"▶"}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Discussion Summary"}),e.jsx("p",{className:"text-sm text-gray-500",children:h(l.summary2)})]})]})}),i.has("summary2")&&e.jsx("div",{className:"px-5 py-4 border-t border-gray-200 bg-gray-50",children:e.jsx("div",{className:"prose prose-sm max-w-none text-gray-800",children:l.summary2.split(`
`).map((r,t)=>{const s=r.trim();return s.startsWith("•")||s.startsWith("- ")?e.jsx("li",{className:"ml-5 mb-1",children:s.replace(/^[•-]\s*/,"")},t):s?e.jsx("p",{className:"mb-2",children:s},t):null})})})]})]}),e.jsx("div",{className:"space-y-6",children:c.map((r,t)=>e.jsxs("article",{id:r.id,className:"bg-white border border-gray-200 rounded p-6 scroll-mt-20",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsxs("span",{className:"text-blue-600",children:[t+1,"."]}),r.title]}),e.jsx("ul",{className:"space-y-2.5",children:r.bullets.map((s,n)=>e.jsxs("li",{className:"flex items-start gap-3 text-gray-700 leading-relaxed",children:[e.jsx("span",{className:"text-blue-500 font-bold mt-0.5",children:"•"}),e.jsx("span",{children:s})]},n))})]},t))}),(l.synthesis||"").includes("## PROVENANCE")&&e.jsxs("footer",{className:"mt-12 pt-6 border-t border-gray-300",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide mb-3",children:"Sources"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[l.url1&&e.jsxs("p",{children:["• Article: ",l.url1]}),l.url2&&e.jsxs("p",{children:["• Discussion: ",l.url2]})]})]})]})]})};export{N as default};
