import{r as o,R as F,j as e}from"./index-CQS_ZpxP.js";const I=({data:l,isBusy:j,statusText:v,canShare:N,actions:p})=>{const[c,g]=o.useState({summary1:!1,summary2:!1}),[d,w]=o.useState(0),[x,C]=o.useState({}),[k,m]=o.useState(!1),y=o.useRef({}),a=F.useMemo(()=>{if(!l.synthesis)return[];const s=l.synthesis.split(`
`),t=[];let r=null;for(const n of s){const i=n.trim(),f=i.includes("TOPIC FOLLOWS");if(f)r&&t.push(r),r={title:i.replace(/^TOPIC FOLLOWS\s*##\s*/i,"").replace(/^##\s*TOPIC FOLLOWS:\s*/i,"").replace(/^TOPIC FOLLOWS:\s*/i,"").trim(),bullets:[]};else if(r&&(i.startsWith("•")||i.startsWith("*")||i.startsWith("-"))){const u=i.replace(/^[•*-]\s*/,"");u&&r.bullets.push(u)}else i.startsWith("## ")&&!f&&(r&&t.push(r),r=null)}return r&&t.push(r),t},[l.synthesis]),h=s=>{var t;w(s),(t=y.current[s])==null||t.scrollIntoView({behavior:"smooth",block:"center"})},S=()=>{const s=(d+1)%a.length;h(s)},T=()=>{const s=(d-1+a.length)%a.length;h(s)},L=s=>{C(t=>({...t,[s]:!t[s]}))},O=async()=>{if(l.synthesis)try{await navigator.clipboard.writeText(l.synthesis),m(!0),setTimeout(()=>m(!1),2e3)}catch{const s=document.createElement("textarea");s.value=l.synthesis,s.style.position="fixed",s.style.opacity="0",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),m(!0),setTimeout(()=>m(!1),2e3)}},W=(s,t)=>{const r=s.match(/^(According to the Article:)/i),n=s.match(/^(According to Hacker News User [^:]+:)/i);return r?e.jsxs("li",{className:"mb-3",children:[e.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-xs font-bold mr-2",children:r[1]}),e.jsx("span",{children:s.substring(r[1].length).trim()})]},t):n?e.jsxs("li",{className:"mb-3",children:[e.jsx("span",{className:"bg-orange-500 text-white px-2 py-1 rounded text-xs font-bold mr-2",children:n[1]}),e.jsx("span",{children:s.substring(n[1].length).trim()})]},t):e.jsx("li",{className:"mb-3",children:s},t)},b=s=>s.split(`
`).map((t,r)=>{const n=t.trim();return n.startsWith("•")||n.startsWith("-")?e.jsx("li",{className:"list-disc ml-5 mb-2",children:n.replace(/^[•-]\s*/,"")},r):n?e.jsx("p",{className:"mb-2",children:n},r):null});return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 pb-20",children:[j&&e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-blue-600 text-white p-3 text-center z-50",children:v}),e.jsxs("div",{className:"max-w-7xl mx-auto p-4 mt-4",children:[a.length>0&&e.jsx("div",{className:"mb-6 flex flex-wrap gap-2 justify-center",children:a.map((s,t)=>e.jsx("button",{onClick:()=>h(t),className:`px-4 py-2 rounded text-sm font-medium transition-colors ${d===t?"bg-teal-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:s.title},t))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[l.summary1&&e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-750 border-b border-gray-700",children:[e.jsx("h3",{className:"font-bold text-sm",children:"Article Summary"}),e.jsx("button",{onClick:()=>g(s=>({...s,summary1:!s.summary1})),className:"text-xs text-teal-400 hover:text-teal-300",children:c.summary1?"Collapse":"Expand"})]}),e.jsx("div",{className:"p-3 overflow-y-auto text-sm text-gray-300",style:{maxHeight:c.summary1?"384px":"192px"},children:b(l.summary1)}),l.url1&&e.jsx("div",{className:"p-2 border-t border-gray-700 text-xs",children:e.jsx("a",{href:l.url1,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"Source"})})]}),l.summary2&&e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-750 border-b border-gray-700",children:[e.jsx("h3",{className:"font-bold text-sm",children:"Discussion Summary"}),e.jsx("button",{onClick:()=>g(s=>({...s,summary2:!s.summary2})),className:"text-xs text-teal-400 hover:text-teal-300",children:c.summary2?"Collapse":"Expand"})]}),e.jsx("div",{className:"p-3 overflow-y-auto text-sm text-gray-300",style:{maxHeight:c.summary2?"384px":"192px"},children:b(l.summary2)}),l.url2&&e.jsx("div",{className:"p-2 border-t border-gray-700 text-xs",children:e.jsx("a",{href:l.url2,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"Source"})})]})]}),e.jsx("div",{className:"lg:col-span-3",children:a.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:T,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm font-medium",children:"← Prev"}),e.jsx("h2",{className:"text-xl font-bold text-center",children:"Interactive Synthesis"}),e.jsx("button",{onClick:S,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm font-medium",children:"Next →"})]}),e.jsx("div",{className:"space-y-4",children:a.map((s,t)=>e.jsxs("div",{ref:r=>y.current[t]=r,className:`bg-gray-800 border-2 rounded-lg overflow-hidden transition-all ${d===t?"border-teal-500":"border-gray-700"}`,children:[e.jsxs("div",{onClick:()=>L(t),className:"p-4 cursor-pointer hover:bg-gray-750 flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:s.title}),!x[t]&&s.bullets[0]&&e.jsxs("p",{className:"text-sm text-gray-400 line-clamp-2",children:[s.bullets[0].substring(0,100),"..."]})]}),e.jsx("span",{className:"text-2xl text-gray-500 ml-4",children:x[t]?"▼":"▶"})]}),x[t]&&e.jsx("div",{className:"p-4 pt-0 border-t border-gray-700",children:e.jsx("ul",{className:"list-disc ml-5 space-y-2 text-gray-300",children:s.bullets.map((r,n)=>W(r,n))})})]},t))})]}):e.jsx("div",{className:"text-center text-gray-500 py-12",children:"No synthesis available"})})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex justify-center gap-4",children:[e.jsx("button",{onClick:O,className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 rounded font-medium flex items-center gap-2",children:k?e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]})}),e.jsx("button",{onClick:p.onDownloadFull,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 rounded font-medium",children:"Download"}),N&&e.jsx("button",{onClick:()=>p.onShare("Synthesis Carousel",l.synthesis||""),className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 rounded font-medium",children:"Share"})]})})]})};export{I as default};
